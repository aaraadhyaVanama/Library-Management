#include <iostream>
#include <string>
using namespace std;


class BookNode {
public:
    string title, url;
    BookNode* left, *right;
    BookNode(string t, string u) : title(t), url(u), left(NULL), right(NULL) {}
};


class GenreNode {
public:
    string name;
    BookNode* books[5] = {NULL}; 
    GenreNode* left, *right;
    GenreNode(string n) : name(n), left(NULL), right(NULL) {}
};


class Library {
private:
    GenreNode* root = NULL; 

    GenreNode* insertGenre(GenreNode* node, string name) { 
        if (!node) return new GenreNode(name);
        return name < node->name ? node->left = insertGenre(node->left, name) : node->right = insertGenre(node->right, name);
    }

    void addBookToGenre(GenreNode* node, string genre, string title, string url) { 
        if (!node) return;
        if (node->name == genre) for (int i = 0; i < 5; i++) if (!node->books[i]) { node->books[i] = new BookNode(title, url); return; }
        addBookToGenre(title < node->name ? node->left : node->right, genre, title, url);
    }

    bool searchBook(GenreNode* node, string title) { 
        if (!node) return false;
        for (BookNode* book : node->books) if (book && book->title == title) {
            cout << "? Book found in genre: " << node->name << "\nVisit website? (yes/no): ";
            string choice; cin >> choice;
            if (choice == "yes") system(("start " + book->url).c_str());
            return true;
        }
        return searchBook(title < node->name ? node->left : node->right, title);
    }

public:
    Library() {
        root = insertGenre(root, "Fiction");
        root = insertGenre(root, "Mystery");
        root = insertGenre(root, "Fantasy");

        addBookToGenre(root, "Fiction", "To Kill a Mockingbird", "https://en.wikipedia.org/wiki/To_Kill_a_Mockingbird");
        addBookToGenre(root, "Fiction", "1984", "https://en.wikipedia.org/wiki/Nineteen_Eighty-Four");
        addBookToGenre(root, "Mystery", "Sherlock Holmes", "https://en.wikipedia.org/wiki/Sherlock_Holmes");
        addBookToGenre(root, "Fantasy", "Harry Potter", "https://en.wikipedia.org/wiki/Harry_Potter");
    }

    void search() { 
        string title;
        while (true) {
            cout << "\n?? Enter book title (or type 'exit' to quit): ";
            cin.ignore(); getline(cin, title);
            if (title == "exit") { cout << "?? Exiting Library ??\n"; break; }
            if (!searchBook(root, title)) cout << "? Book not found!\n";
        }
    }
};

int main() {
    cout << "?? Welcome! Do you wish to enter the library? (yes/no): ";
    string choice; cin >> choice;
    if (choice != "yes") return cout << "Goodbye! ??\n", 0;

    Library library;
    library.search();
}
